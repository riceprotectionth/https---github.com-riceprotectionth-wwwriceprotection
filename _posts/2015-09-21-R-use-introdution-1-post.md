---
layout: post
title: การใช้ R ระดับต้น บทที่ 1
excerpt: "มาทำความรู้จักไฟล์ และการทำงานของ function ใน R และ การอ่านไฟล์ ด้วย R"
tags: [R]
modified: 2015-10-16
comments: true
---
ไฟล์ ก่อนที่เราจะทำงานกับอาร์นั้น สำคัญว่า เราจะต้องรู้จักกันก่อนว่า เราจะให้อาณือ่านไฟล์ของเราได้อย่างไร หรือ อาร์อ่านไฟล์อะไร สำหรับโปแกรมที่เรามักจะใช้เก็บขอ้มูลกัน โดยทั้วไปเรามักจะเก็บไฟล์ที่เรียกว่า spreadsheet ใช่ไหมหละครับ ซึ่งลองนึกภาพนะครับ เราจะมักเปิดไฟล์โดยการคลิ้กสองครั้งแล้ว Excel ก็จะเปิดขึ้นมาให้เรา แต่สำหรับการทำงานกับอาร์นั้น เราไม่สามารถทำอย่างนั้นได้ เราจะต้องทำด้วยการบอกด้วยการเขียนคำสั่ง ที่เราเรียกว่า code ครับ เราจะเปิดไฟล์ในอาร์ด้วยการเขียนเท่านั้น  สำหรับวิธีการนี้มีข้อดีหลายอย่างครับ ถ้าเมื่อเราต้องเปิดไฟล์ หรือเรียกใช้ไฟล์นี้บ่อยๆ การไม่ต้องจำว่าไฟล์อยู่ที่ไหน ไม่ต้องเปิดโฟลเดอร์แล้วเปิดโฟลเดอร์เล่าจะไปถึงไฟล์ที่เราต้องการ เพียงแต่รันโค้ดเดิมที่เคยเขียนไว้ เท่านี้ก็ไม่ต้อง งงหรือจำแล้วหละครับว่าไฟล์เจ้ากรรมอยู่ที่ไหน หรือถ้า สมมุติว่าเราแชร์โฟล์เดอร์กับเพื่อนหรืออาจารย์เรา เพียงแต่เพื่อนเราหรืออาจารย์เรารันโค้ดอันเดียวกันก็สามารถเรยกไฟล์อันเดียวกันได้

การรันโค้ดนั้นเพื่อต้องการสั่งให้อาร์นั้นทำอะไรกับไฟล์ของเราหรือข้อมูลของเรา นี่อาจจะเป็นเรื่องใหม่และรู้สึกลำบาก สำหรับผู้เริ่มต้นเรียน ผมเองไม่เคยเริ่มต้นเรียนการเขียนโค้ดมาก่อน อาร์เป็นโปรแกรมแรกที่ผมเรียนเขียนโค้ดเลย ถึงแม้ว่าจะใช้เวลาเรียนและปรับความคิดได้ก็ใช้เวลาสักพัก แต่คุ่มมากเลยนะครับกับ โปรแกรมที่ทั้งฟรีแล้วมีฟังชั้นมากมายและเป็นที่ยอมรับโดยสากล ไม่ต้องไปจ่ายเงินโปรแกรมลิขสิทธื์แพงๆด้วย เห็นไหมหละครับว่า มันคุ้มค่าจริงๆ งั้นเรามาเริ่มกันเลยดีกว่า

การเปิดไฟล์ในอาร์

ความสามารถของอาร์ในปัจจุบัน เท่าที่ผมเคยเห็นและรู้จัก สามารถเปิดด้วยโปรแกรมอาร์ เช่น ไฟล์เพลง ไฟล์รูปภาพ ไฟล์แผนที่ โดยทั้วไปแล้วไฟล์สามารถแบ่งออกได้เป็น 2 ประเภท

- text file formats ไฟล์ประเภทนี้สามารถเปิดได้หมดกับทุกโปแกรม เช่น csv dat tab เป็นต้น

- Binary formats ไฟล์ปรเภทนี้สามารถเปิดได้ด้วยโปรแกรมเฉพาะเท่านั้น เช่น SPSS SAS file เป็นต้น

ตอนนี้ จะเห็นได้ว่า ถ้าเราใช้ไฟลืที่เปิดได้กับทุกโปแกรม เราหรือเพื่อนเราก็จะไม่มีปัญหาที่จะต้องโหลดโปแกรมเฉพาะเพื่อใช้เปิดไฟล์นั้นๆ จากนี้ ผมจะเน้นที่ ไฟล์ ชนิดแรกกัน

Text file formats ไฟล์สากลที่สามารถเปิดไก้กับทุกโปรแกรม ก็สามารถแบ่งออกเป็น delimited ไฟล์เทกประเภทนี้ จะใช้ อักษรพิเศษ เช่น spacebar( ) , comma (,) เป็นต้น เป็นการแบ่ง ระหว่างค่าในแถวเดียวกัน

ยกตัวอย่าง

16AUG2015,20,21,22,23,24

17AUG2015,10,11,12,13,14

fixed-width ไฟล์เทกชนิดนี้ จะกำหนดมาแล้วว่าจะแบ่งแต่ละค่าด้วยกี่ตัวอักษรหรือคำเช่น จากตัวอย่างข้างบน ก็จะกำหนดโดยการแบ่งเช่น นับไป 9 คำ แล้วแบ่ง 2 คำแล้วแบ่ง 2 คำแล้วแบ่ง 2คำแล้วแบ่ง 2 คำแล้วแบ่ง 2 คำแล้วแบ่ง

ตอนนี้ก็ลองเปิดไฟล์ด้วยโปแกรมอาร์กันได้เลย ด้วยการเปิดไฟล์ csv ก่อนครับ

พิมพ์โคด นะครับ

{% highlight r %}
> read.csv("C:\Users\Sith\data.csv") # for window users
> read.csv("~\Users\Sith\data.csv") # for Mac users
{% endhighlight %}

ครับแน่นอน คุณไม่สามารถเปิดได้ เป็นเพราะว่า คุณยังไม่มีไฟล์และคุณเองก็ไม่ได้มีโฟลเดอร์เหมือนอย่างผม ตอนนี้ ลองสร้างไฟล์ csv ขึ้นมาสักไฟล์นึงก่อนแล้วกันครับ แล้วเก็บไว้สักที่นึงก่อน

ต่อจากนี้ไปผมจะบอก ข้อสำคัญสองข้อเกี่ยวกับการเรียกไฟล์ในอาร์


สำหรับการเรียกหรืออ่านไฟล์ ไม่ว่าจะอะไรก็ตามด้วยอาร์ จะต้องใส่นามสกุลด้วย เช่นไฟลของคุณเป็นไฟล์ csv ดังนั้น เวลาเขียนโคด จะต้องใส่ เช่น data.csv ด้วยทุกครั้ง</li>


จะต้องระบุหรือบอกที่อยู่ให้อาร์ด้วย อันที่จริง มีหลายวิธีนะครับที่ไม่จำเป็นต้องเขียนหรือบอกที่อยู่ก็ได้ แต่ผมแนะนำเลยนะครับ ให้เขียนไว้ จะดีกว่า

สำหรับผู้ใช้ Window ไม่ยากเลยครับ เพราะว่า window ก็จะบอกที่อยู่โดยการดูแถบข้างบน แล้วคัดลอก แต่ แต่ ยังไม่พอนะครับ เช่น ตอนนี้ ไฟล์คุณ C:/Users/Sith/Documents/data.csv คุณจะต้องเปลี่ยนจาก / เป็น \ ทั้งหมด


สำหรับผู้ใช้ Mac ~/Users/Sith/Documents/data.csv ก็เปลี่ยนจาก / เป็น \ ทั้งหมด  เช่นกันครับ

ตอนนี้คุณลองเรียกไฟล์ที่คุณสร้างขึ้นมาซิครับ

{% highlight r %}

function call    :  read.csv("C:\Users\Sith\Documents\data.csv") for window users

function name: read.csv

parentheses   :               (                                    )

argument       :                 "C:\Users\Sith\Documents\data.csv"

{% endhighlight %}

ก็เหมือนกับทุกภาษานั้นแหละครับ ที่จะต้องมี syntex หรือ grammar งั้นเรามาดูกันดีกว่าว่าเบื้องต้น ของคำสั้งนี้เป็นอย่างไร อันที่จริงแล้วทุกคำสั่งในอาร์นั้นก็จะมีพื้นฐานแบบนี้โดยทั้งสิ้นครับ function คือคำสั้งหรือสิ่งที่เราจะให้อาณืทำอะไรกับอะไร เช่น ตัวอย่างข้างบน คือ read.csv  นั้นคือให้อาร์อ่านไฟล์ csv แล้วสิ่งที่จะให้อ่านนั้น จะอยู่ใน parentheses หรือวงเล็บ แล้วในวงเล็บจะเป็น argument ความสนุกของคำสั่งนี้คือ ต้องการ arguemnt ที่เป็น character เราถึงต้องใส่ "   " double quotes

คำสั่งอีกคำสั่งนึงที่สำคัญ
{% highlight r %}
> setwd() # set working directory
{% endhighlight %}
เป็นการบอกหรือกำหนดให้อาร์อ่านไฟล์หรือบันทึกไฟล์ลงใน directoty ที่เรากำหนด

{% highlight r %}
> setwd("C:\Users\Sith\Documents")
{% endhighlight %}

เมื่อจะอ่านไฟล์ใน folder Documents ก็ไม่ต้องบอกอีกแล้วว่าอยู่ในโฟลเดอร์นี้

{% highlight r %}
> read.csv("data.csv")
{% endhighlight %}
มาถึงตรงนี้ สามารถเข้าใจเบื้องต้นของการทำงานกับอาร์แล้ว ไม่ยากเลยใช่ไหมครับ
